{% extends "layouts/base.html" %}

{% block title %} Inquilinos - Documentos - Detalles {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<link href="/static/assets/css/ms.css" rel="stylesheet"/>
{% endblock stylesheets %}

{% block content %}
<body onload="obtenerInquilino()">
<div id="li2" class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4" style="background-color:#edede9;">
    <div class="d-block mb-4 mb-md-0" style="margin-left:10px">
        <h1 class="h1">Inquilinos</h>
        <p class="mb-0">Listado de inquilinos</p>
    </div>
    <div class="btn-toolbar mb-2 mb-md-0">
        <a href="#" class="btn btn-sm btn-gray-800 d-inline-flex align-items-center me-2">
            <svg class="icon icon-xs me-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
            Nuevo Inquilino
        </a>
    </div>
  </div>

</div>
<div class="table-settings mt-2 mb-4">
  <div class="row justify-content-between align-items-center">
      <div class="col-9 col-lg-8 d-md-flex">
          <div class="input-group me-2 me-lg-3 fmxw-300">
              <span class="input-group-text">
                  <svg class="icon icon-xs" x-description="Heroicon name: solid/search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                  </svg>
              </span>
              <input type="text" class="form-control" placeholder="Buscar por Nombre">
            </div>
            <select class="form-select fmxw-200 d-none d-md-inline" aria-label="Message select example 2">
                <option selected>Todos</option>
              <option value="1">Persona Moral</option>
              <option value="2">Persona Física</option>
            </select>
        </div>
    </div>
</div>
<div class="card card-body shadow border-0 table-wrapper table-responsive"><!-- podemos agregar la clase => table-responsive-->
    <table class="table user-table table-hover align-items-center mb-5"> <!--id="datatable"-->
        <thead>
            <tr >
                <th class="border-bottom"><input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"></th>
                <th class="border-bottom">ID</th>
                <th class="border-bottom">Nombre</th>						
                <th class="border-bottom">Fecha de Registro</th>
                <th class="border-bottom">Tipo de Persona</th>
                <th class="border-bottom">Estatus</th>
                <th class="border-bottom">Acción</th>
                <th class="border-bottom"></th>
            </tr>
        </thead>
        <tbody>
            {% for inq in inquilinos %}
            <tr>
                <td>
                    <div class="form-check dashboard-check">
                        <input class="form-check-input" type="checkbox" value="" id="userCheck1">
                    </div>
                </td>
                <td><span class="fw-normal ">{{inq.id}}</span></td>
                <td>
                    <a href="/detalles_inquilino/{{inq.id}}" class="d-flex align-items-center">
                        <div class="d-block">
                            <span class="fw-bold">{{inq.nombre}} {{inq.apellido}} {{inq.apellido1}}</span>
                            <div class="small text-gray">{{inq.email}}</div>
                        </div>
                    </a>
                </td>
                <td><span class="fw-normal">{{inq.created}}</span></td>                        
                <td>
                    <span class="fw-normal">{{inq.p_fom}}</span>
                </td>
                <td><span class="fw-normal text-success">Active</span></td>
                <td>
                    <div class="btn-group dropstart">
                        <button class="btn btn-link text-dark dropdown-toggle dropdown-toggle-split " data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <svg class="icon icon-xs" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"></path></svg>
                            <span class="visually-hidden">Toggle Dropdown</span>
                        </button>
                        
                        <div class="dropdown-menu dashboard-dropdown dropdown-menu-start mt-2 py-1">
                            <a class="dropdown-item d-flex align-items-center" href="/editar_inq/{{inq.id}}">
                                <svg xmlns="http://www.w3.org/2000/svg" title="Editar" data-bs-toggle="tooltip" fill="currentColor" fill-rule="evenodd"  class="icon icon-xs bi bi-pencil ms-1" viewBox="0 0 16 16">
                                    <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                                  </svg>&nbsp;Editar
                            </a>

                            <a class="dropdown-item d-flex align-items-center" onClick="alert0({{inq.id}})">
                                <svg class="icon icon-xs text-danger ms-1" title="Historial" data-bs-toggle="tooltip" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>
                                &nbsp;Borrar
                            </a>                             
                        </div>   
                    </div>
                </td>

            </tr>
            {% endfor %}
        </tbody>
    </table>
   
</div>

<div class="modal fade" id="archivos" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" style="height:15px" id="exampleModalLabel">Documentos Subidos</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" onclick="location.href='/inquilinos/';" aria-label="Close"></button>
        </div>
        <div class="modal-body" style="background:linear-gradient(0deg, #231942ff, #5e548eff, #9f86c0ff, #be95c4ff, #e0b1cbff);">
            <body>
                <div>
                    <div class="row me-1 ms-1 border shadow border-2 " style="background-color:white;">
                        <div class="col border-end border-2" >
                            <h2 class="h5 mb-3 mt-4">Observa o Modifica tus archivos</h2>
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <label>Inquilino: </label>
                            <input id="inquilino" name="inquilino"  type="text" style="display:none"  readonly>
                            <input class="form-control-plaintext card shadow border-1 ps-1" id="inquilino_nombre" type="text" value="{{ arrendador.nombre_notario_ac}}"  readonly>
                        </div> 
                    </div> 
                    
                      <div class="mt-4 " method="POST" enctype="multipart/form-data">
                            <div class="row" >
                                <div class="col border shadow border-2 me-2" style="background-color:white;">
                                    <h2 class="h5 mb-3 mt-4">C. Domicilio.</h2>
                                    <hr class="hr" />
                                    <div class="card mb-4" style="width: 100%;">
                                      <a id="link_cd" href="" target="_blank" style="width: 70%; height: 70%; margin-left: auto; margin-right: auto; margin-top:25px;">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png" class="" alt="..."/>
                                      </a>
                                      <div class="card-body">
                                        <hr class="hr" />
                                        <div class="container">
                                          <div class="row">
                                            <div class="col">
                                                <button title="Historial" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-info">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
                                                    <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                                                    <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                                                    <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                                                  </svg>
                                                </button>
                                            </div>
                                            <div class="col">
                                                
                                                <!-- El botón de archivo personalizado -->
                                                <label for="Comp_dom" title="Actualizar" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-success custom-file-input">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                                </svg>
                                                </label>
                                                <!-- El input file oculto -->
                                                <input type="file" class="file-input" id="Comp_dom" accept="application/pdf">
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div>
                                      <span>Comentarios:</span>
                                        <textarea class="form-control mb-2" placeholder="..." id="textarea" name="observaciones" rows="3"></textarea>
                                    </div>
                                  </div>

                                  <div class="col border shadow border-2 me-2" style="background-color:white;">
                                    <h2 class="h5 mb-3 mt-4">INE.</h2>
                                    <hr class="hr" />
                                    <div class="card mb-4" style="width: 100%;">
                                      <a id="link_ine" href="" target="_blank" style="width: 70%; height: 70%; margin-left: auto; margin-right: auto; margin-top:25px;">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png" class="" alt="..."/>
                                      </a>
                                      <div class="card-body">
                                        <hr class="hr" />
                                        <div class="container">
                                          <div class="row">
                                            <div class="col">
                                                <button title="Historial" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-info">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
                                                    <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                                                    <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                                                    <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                                                  </svg>
                                                </button>
                                            </div>
                                            <div class="col">
                                                <!-- El botón de archivo personalizado -->
                                                <label for="Ine" title="Actualizar" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-success custom-file-input">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                                </svg>
                                                </label>
                                                <!-- El input file oculto -->
                                                <input type="file"  class="file-input" id="Ine" accept="application/pdf">
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div>
                                      <span>Comentarios:</span>
                                        <textarea class="form-control mb-2" placeholder="..." id="textarea" name="observaciones" rows="3"></textarea>
                                    </div>
                                  </div>

                                  <div class="col border shadow border-2 me-2" style="background-color:white;">
                                    <h2 class="h5 mb-3 mt-4">RFC.</h2>
                                    <hr class="hr" />
                                    <div class="card mb-4" style="width: 100%;">
                                        <iframe id="frame_rfc" onClick="abrirEnlace()" class="" alt="..." style="width: 100%; height: 100%;">
                                        </iframe>
                                        <a href="#" id ="link_rfc" target="_blank" class="text-tertiary me-3 mt-2">Ver Documento.</a>
                                      <div class="card-body">
                                        <hr class="hr" />
                                        <div class="container">
                                          <div class="row">
                                            <div class="col">
                                              <button title="Historial" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-info">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
                                                  <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                                                  <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                                                  <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                                                </svg>
                                            </button>
                                            </div>
                                            <div class="col">
                                             
                                                <!-- El botón de archivo personalizado -->
                                                <label for="Rfc" title="Actualizar" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-success custom-file-input">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                                </svg>
                                                </label>
                                                <!-- El input file oculto -->
                                                <input type="file" class="file-input" id="Rfc" accept="application/pdf">
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div>
                                      <span>Comentarios:</span>
                                        <textarea class="form-control mb-2" placeholder="..." id="textarea" name="observaciones" rows="3"></textarea>
                                    </div>
                                  </div>

                                  <div class="col border shadow border-2 me-2" style="background-color:white;">
                                    <h2 class="h5 mb-3 mt-4">Ingresos.</h2>
                                    <hr class="hr" />
                                    <div class="card mb-4" style="width: 100%;">
                                        <iframe id="frame_ingresos" class="" alt="..." style="width: 100%; height: 100%;">
                                        </iframe>
                                        <a href="#" id ="link_ingresos" target="_blank" class="text-tertiary me-3 mt-2">Ver Documento.</a>
                                      <div class="card-body">
                                        <hr class="hr" />
                                        <div class="container">
                                          <div class="row">
                                            <div class="col">
                                              <button title="Historial" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-info">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
                                                  <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                                                  <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                                                  <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                                                </svg>
                                            </button>
                                            </div>
                                            <div class="col">
                                             
                                                <!-- El botón de archivo personalizado -->
                                                <label for="Ingresos" title="Actualizar" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-success custom-file-input">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                                </svg>
                                                </label>
                                                <!-- El input file oculto -->
                                                <input type="file" class="file-input" id="Ingresos" accept="application/pdf">
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div>
                                      <span>Comentarios:</span>
                                        <textarea class="form-control mb-2" placeholder="..." id="textarea" name="observaciones" rows="3"></textarea>
                                    </div>
                                  </div>

                                  <div class="col border shadow border-2 me-2" style="background-color:white;">
                                    <h2 class="h5 mb-3 mt-4">Rec. Laboral</h2>
                                    <hr class="hr" />
                                    <div class="card mb-4" style="width: 100%;">
                                        <iframe id="frame_recomendacion_laboral" onClick="abrirEnlace()" class="" alt="..." style="width: 100%; height: 100%;">
                                        </iframe>
                                        <a href="#" id ="link_recomendacion_laboral" target="_blank" class="text-tertiary me-3 mt-2">Ver Documento.</a>
                                      <div class="card-body">
                                        <hr class="hr" />
                                        <div class="container">
                                          <div class="row">
                                            <div class="col">
                                              <button title="Historial" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-info">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
                                                  <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                                                  <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                                                  <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                                                </svg>
                                            </button>
                                            </div>
                                            <div class="col">
                                             
                                                <!-- El botón de archivo personalizado -->
                                                <label for="Recomendacion_laboral" title="Actualizar" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-success custom-file-input">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                                </svg>
                                                </label>
                                                <!-- El input file oculto -->
                                                <input type="file" class="file-input" id="Recomendacion_laboral" accept="application/pdf">
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div>
                                      <span>Comentarios:</span>
                                        <textarea class="form-control mb-2" placeholder="..." id="textarea" name="observaciones" rows="3"></textarea>
                                    </div>
                                  </div>

                                  <div class="col border shadow border-2 me-2" style="background-color:white;">
                                    <h2 class="h5 mb-3 mt-4">Docs. Extras </h2>
                                    <hr class="hr" />
                                    <div class="card mb-4" style="width: 100%;">
                                        <iframe id="frame_extras" onClick="abrirEnlace()" class="" alt="..." style="width: 100%; height: 100%;">
                                        </iframe>
                                        <a href="#" id ="link_extras" target="_blank" class="text-tertiary me-3 mt-2">Ver Documento.</a>
                                      <div class="card-body">
                                        <hr class="hr" />
                                        <div class="container">
                                          <div class="row">
                                            <div class="col">
                                              <button title="Historial" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-info">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
                                                  <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
                                                  <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
                                                  <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                                                </svg>
                                            </button>
                                            </div>
                                            <div class="col">
                                             
                                                <!-- El botón de archivo personalizado -->
                                                <label for="Extras" title="Actualizar" data-bs-toggle="tooltip" data-bs-placement="bottom" type="button" class="btn btn-outline-success custom-file-input">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                                </svg>
                                                </label>
                                                <!-- El input file oculto -->
                                                <input type="file" class="file-input" id="Extras" accept="application/pdf">
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div>
                                      <span>Comentarios:</span>
                                        <textarea class="form-control mb-2" placeholder="..." id="textarea" name="observaciones" rows="3"></textarea>
                                    </div>
                                  </div>
                            </div>
                       
                          <button type="submit" id="finalizar"  class="btn btn-secondary mt-2">Guardar Cambios</button>
                    </div>
                 
                  </div>
              </body>
        </div>
      </div>
    </div>
  </div>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
    .file-input {
      display: none;
    }
    .modal-xl{
      max-width: 73% !important;
      
    }
    
    * {
      
     
        font-family: "Roboto";
    }
    body.swal2-shown > [aria-hidden="true"] {
        transition: 0.1s filter;
        filter: blur(10px);
      }
    body {
        background-color: #F5F5F5;
        
    }

    .formchido {
        background-color: #FFFFFF;
        padding: 25px;
        
    }

    table {
        width: 100%; 
        text-align: center;
        margin-top: 25px;
        padding: 25px;
        background-color: #FFFFFF;
    }

    table tr td {
        padding-top: 15px;            
    }
   
</style>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->


{% block javascripts %}
<script src="https://code.jquery.com/jquery-3.6.3.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>


    $(function () {
        $("form").keypress(function (e) {
            var key;
            if (window.event)
                key = window.event.keyCode; //IE
            else
                key = e.which; //firefox     
            return (key != 13);
        });
    });

    $(document).ready(function() {
       
       $('#archivos').modal({ keyboard: false,backdrop: false })
       $('#archivos').modal('show');
      
    });

const server = 'http://192.168.2.14:8001'
const configin = {
    headers: {
      'Content-Type': 'multipart/form-data',
      'Authorization': `Token ${localStorage.getItem('token')}`
    },
  };

const btnSubmit = document.getElementById("finalizar")
btnSubmit.addEventListener("click", function (event) {
    event.preventDefault();

    var formData = new FormData();

    var fileInputElement1 = document.getElementById("Comp_dom")
    var fileInputElement2 = document.getElementById("Ine")
    var fileInputElement3 = document.getElementById("Rfc")
    var fileInputElement4 = document.getElementById("Ingresos")
    var fileInputElement5 = document.getElementById("Extras")
    var fileInputElement6 = document.getElementById("Recomendacion_laboral")
    console.log(fileInputElement2.files)
   
    if (fileInputElement1.files.length == 1){
      console.log("Comporbante No esta vacio")
      formData.append("Comp_dom", fileInputElement1.files[0]);
      enviar_datos(formData)
    }
    else{
    console.log("Comporbante esta vacio")
      //
    }

    if (fileInputElement2.files.length == 1){
      console.log("Ine No esta vacio")
      formData.append("Ine", fileInputElement2.files[0]);
      enviar_datos(formData)
    }
    else{
    console.log("Ine esta vacio")
    }

    if (fileInputElement3.files.length == 1){
      console.log("RFC No esta vacio")
      formData.append("Rfc", fileInputElement3.files[0])
      enviar_datos(formData)
    }
    else{
    console.log("RFC esta vacio")
      
    }
    if (fileInputElement4.files.length == 1){
      console.log("Ingresos No esta vacio")
      console.log(fileInputElement4.files[0])

      formData.append("Ingresos", fileInputElement4.files[0]);
      enviar_datos(formData)
    }
    else{
    console.log("Ingresos esta vacio")
      //
    }
    if (fileInputElement5.files.length == 1){
      console.log("Extras No esta vacio")
      formData.append("Extras", fileInputElement5.files[0]);
      enviar_datos(formData)
    }
    else{
    console.log("Extras esta vacio")
      //
    }
    if (fileInputElement6.files.length == 1){
      console.log("Recomendacion laboral No esta vacio")
      formData.append("Recomendacion_laboral", fileInputElement6.files[0]);
      enviar_datos(formData)
    }
    else{
    console.log("Recomendacion laboral esta vacio")
      //
    }
if (fileInputElement6.files.length == 0 && fileInputElement5.files.length == 0 && fileInputElement4.files.length == 0 && fileInputElement3.files.length == 0 && fileInputElement2.files.length == 0 && fileInputElement1.files.length == 0 )
{
  Swal.fire({
    icon: 'error',
    title: 'Algo salio mal',
    text: 'Documentos vacios, por favor adjunta alguno que desees actualizar!'
  })
}
    //enviar_datos(formData)
})



function obtenerInquilino(){
    var datos = JSON.parse( localStorage.getItem('data_inquilino'))
   
    console.log("detalles archivo",datos)
   
    document.getElementById("inquilino").value = `${datos.id}`
    document.getElementById("inquilino_nombre").value = `${datos.nombre} ${datos.apellido} ${datos.apellido1}`
    
    comp = datos.archivos[0].Comp_dom
    comp = `${server}/static${comp}`
  
    ine = datos.archivos[0].Ine
    ine = `${server}/static${ine}`
    
    rfc = datos.archivos[0].Rfc
    rfc = `${server}/static${rfc}`
    
    ingresos = datos.archivos[0].Ingresos
    ingresos = `${server}/static${ingresos}`

    extra = datos.archivos[0].Extras
    extra = `${server}/static${extra}`

    rl = datos.archivos[0].Recomendacion_laboral
    rl = `${server}/static${rl}`

    console.log(comp);
    console.log(ine);
    console.log(rfc);
    
    document.getElementById("link_cd").href = comp;
    document.getElementById("link_ine").href = ine;

    document.getElementById("link_rfc").href = rfc;
    document.getElementById("frame_rfc").src = rfc;

    document.getElementById("link_ingresos").href = ingresos;
    document.getElementById("frame_ingresos").src = ingresos;

    document.getElementById("link_extras").href = extra;
    document.getElementById("frame_extras").src = extra;

    document.getElementById("link_recomendacion_laboral").href = rl;
    document.getElementById("frame_recomendacion_laboral").src = rl;

    } 


function enviar_datos(formulario){
  var datos = JSON.parse( localStorage.getItem('data_inquilino'))
  var cd = document.getElementById("Comp_dom")
  var i = document.getElementById("Ine")
  var r = document.getElementById("Rfc")

  var ingreso = document.getElementById("Ingresos")
  
  var e = document.getElementById("Extras")
  var rl = document.getElementById("Recomendacion_laboral")
  console.log("datos viejos",datos)
  console.log("formulario",formulario)

  id = datos.archivos[0].id

  // Actualizar un objeto
  //axios.put(`${server}/documentos_edit/${id}/`,formulario,configin) metodo for
  axios.put(`${server}/documentos_reg/${id}/`,formulario,configin) // update
  .then(response => {
    console.log(response.data);  // Imprimir los datos del objeto actualizado
    let respuesta = response.data
    let datos_nuevos = {}
    datos_nuevos = datos

    if(i.files.length == 1){
      console.log("ine")    
    ine_nueva = respuesta.Ine  
    ine = ine_nueva.split("/")
    ine = "/" + ine[3] + "/" + ine[4] + "/" + ine[5] + "/" + ine[6] + "/" + ine[7] + "/" + ine[8] + "/" + ine[9] + "/" 
    datos_nuevos.archivos[0].Ine = ine
    }

    if(cd.files.length == 1){
      console.log("Comporbante")    
      comp_dom_nueva = respuesta.Comp_dom
      comp_dom = comp_dom_nueva.split("/")
      comp_dom = "/" + comp_dom[3] + "/" + comp_dom[4] + "/" + comp_dom[5] + "/" + comp_dom[6] + "/" + comp_dom[7] + "/" + comp_dom[8] + "/" + comp_dom[9] + "/";
      datos_nuevos.archivos[0].Comp_dom = comp_dom
      }


    if(r.files.length == 1){
      console.log("rfc") 
      info3 = "RFC"   
      rfc_nueva = respuesta.Rfc 
      rfc = rfc_nueva.split("/")
      rfc = "/" + rfc[3] + "/" + rfc[4] + "/" + rfc[5] + "/" + rfc[6] + "/" + rfc[7] + "/" + rfc[8] + "/" + rfc[9] + "/" 
      datos_nuevos.archivos[0].Rfc = rfc    
      }
    
  
    if(ingreso.files.length == 1){
      console.log("ingresos")    
    ingresos_nueva = respuesta.Ingresos
    ing = ingresos_nueva.split("/")
    ing = "/" + ing[3] + "/" + ing[4] + "/" + ing[5] + "/" + ing[6] + "/" + ing[7] + "/" + ing[8] + "/" + ing[9] + "/" 
    datos_nuevos.archivos[0].Ingresos = ing
    }

    if(e.files.length == 1){
      console.log("Extras")    
    e_nueva = respuesta.Extras
    extra = e_nueva.split("/")
    extra = "/" + extra[3] + "/" + extra[4] + "/" + extra[5] + "/" + extra[6] + "/" + extra[7] + "/" + extra[8] + "/" + extra[9] + "/" 
    datos_nuevos.archivos[0].Extras = extra
    }

    if(rl.files.length == 1){
      console.log("Recomendacion_laboral")    
    rl_nueva = respuesta.Recomendacion_laboral
    rln = rl_nueva.split("/")
    rln = "/" + rln[3] + "/" + rln[4] + "/" + rln[5] + "/" + rln[6] + "/" + rln[7] + "/" + rln[8] + "/" + rln[9] + "/" 
    datos_nuevos.archivos[0].Recomendacion_laboral = rln
    }

localStorage.setItem('data_inquilino', JSON.stringify(datos_nuevos));
alerta()
    
  })
  .catch(error => {
    console.error(error);
  });
}
function alerta(){
  Swal.fire({
      title: 'Documentos actualizados',
      text: "Se actualizaron correctamente los archivos seleccionados",
      icon: 'success',
      reverseButtons: true,
      confirmButtonColor: '#3085d6',
      confirmButtonText: 'Ok'
  }).then((result) => {
  if (result.isConfirmed) {
      setTimeout(function(){
        location.reload()

      }, 1000);
   
        
        }
      
})}
</script>
<script src="/static/assets/repositorios/loader.js"></script>
<script>
    document.getElementById("li2").onload = inicio()
    function inicio(){
         console.log("entro inicio")
        auten()
    }
   
</script>
{% endblock javascripts %}

